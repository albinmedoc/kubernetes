apiVersion: v1
kind: Secret
metadata:
  name: redis-secrets
  namespace: redis
  labels:
    app.kubernetes.io/name: redis
    app.kubernetes.io/component: database
type: Opaque
stringData:
  # ACL file that Redis will load
  users.acl: |
    # Admin user - full access to all databases and commands
    user admin on ><ADMIN_PASSWORD> ~* &* +@all

    # Paperless-NGX user - connects to database 1 via connection string
    # Full access to all keys, but restricted from dangerous commands
    user paperless on ><PAPERLESS_PASSWORD> ~* resetchannels &* +@all -@dangerous

    # Grafana user - connects to database 2 via connection string
    # Full access to all keys, but restricted from dangerous commands
    user grafana on ><GRAFANA_PASSWORD> ~* resetchannels &* +@all -@dangerous

    # Disable the default user for security
    user default off

  # Admin password for health probes
  REDIS_ADMIN_PASSWORD: <ADMIN_PASSWORD>
